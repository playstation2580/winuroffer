const lightboxDefaultCss="\n        .animated-lightbox {\n          transition: visibility 0.5s, opacity 0.5s;\n          display: block !important;\n          visibility: hidden;\n          opacity: 0;\n        }\n    \n        .show-lightbox {\n          opacity: 1;\n          visibility: visible;\n        }\n    ";"undefined"==typeof youtubeVideos&&(window.youtubeVideos=[]),"undefined"==typeof youtubePlayers&&(window.youtubePlayers=[]);const Common={preventDoubleSubmission:function(e){e.onsubmit=function(t){"1"===e.dataset.submitted?(t.preventDefault(),t.stopImmediatePropagation()):e.dataset.submitted="1"}}},LightboxRender={cssManager:{addCssStyle:function(e){const t=document.createElement("style");t.appendChild(document.createTextNode(e));const n=document.getElementsByTagName("head")[0],o=document.getElementsByTagName("link")[0];n.insertBefore(t,o)}},animationManager:{enableAnimationCapabilities:function(e){e.classList.add("animated-lightbox")},show:function(e){e.classList.add("show-lightbox")},hide:function(e){const t=document.getElementsByClassName("form-error-tooltip");for(let e of t)e.parentNode.removeChild(e);e.classList.remove("show-lightbox")}},youtubeManager:{loadYoutubeApiScript:function(){const e=document.getElementsByTagName("head").item(0).getElementsByTagName("script");if(!(()=>{for(let t of e)if(/(youtube.(?:[a-z{2-3}]+)\/iframe_api)/.test(t.getAttribute("src")))return!0;return!1})()){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const n=e[0];n.parentNode.insertBefore(t,n)}},handlePlayVideo:function(){void 0!==window.youtubeVideos&&window.youtubeVideos.forEach(function(e){const t=document.getElementById(e.hash);1===e.autoplay&&void 0!==window.youtubePlayers[e.hash]&&t.closest(".landingi-popup")&&0!==t.closest(".landingi-popup").length&&window.youtubePlayers[e.hash].playVideo()})},handlePauseVideo:function(e){void 0!==window.youtubeVideos&&window.youtubeVideos.forEach(function(t){0!==e.length&&void 0!==window.youtubePlayers[t.hash]&&"function"==typeof window.youtubePlayers[t.hash].pauseVideo&&window.youtubePlayers[t.hash].pauseVideo()})},initializeYoutubeVideos:function(){window.youtubeVideos.forEach(function(e){const t={playerVars:{rel:e.rel,loop:e.loop,showinfo:e.showinfo,controls:e.controls,mute:e.mute},events:{onReady:function(t){e.autoplay&&(!document.getElementsByClassName("video-iframe-container").length&&document.getElementsByClassName("landingi-popup").length||t.target.playVideo())},onStateChange:function(t){0===t.target.getPlayerState()&&0!==e.loop&&t.target.playVideo()}}};e.id&&(t.videoId=e.id),window.youtubePlayers[e.hash]=new YT.Player(e.hash,t)})}},vimeoManager:{initializeVimeoVideos:function(){const e=document.getElementsByTagName("head").item(0).getElementsByTagName("script"),t="https://player.vimeo.com/api/player.js";let n=!1;for(let o of e)o.getAttribute("src")===t&&(n=!0);if(!1===n){const n=document.createElement("script"),o=e[0];n.src=t,o.parentNode.insertBefore(n,o)}},handlePauseVideos:function(e){for(let t of this.getVimeoPlayers(e))t.pause()},handlePlayVideos:function(e){for(let t of this.getVimeoPlayers(e))t.play()},handleMuteVideos:function(e){for(let t of this.getVimeoPlayers(e))t.setVolume(0)},handleUnmuteVideos:function(e){for(let t of this.getVimeoPlayers(e))t.setVolume(1)},getVimeoPlayers:function(e){const t=[];for(let n of e.querySelectorAll("[data-vimeo-url"))t.push(new Vimeo.Player(n.getAttribute("id"),{}));return t}},lightboxManager:{hookCustomScripts:function(){let e=document.querySelectorAll(".landingi-popup-body script");for(let t of e){const e=t.parentElement,n=t.getAttribute("src"),o=t.innerHTML;if(null!==n){e.removeChild(t);let o=document.createElement("script");o.src=n,e.appendChild(o)}if(""!==o){e.removeChild(t);let n=document.createElement("script");n.text=o,e.appendChild(n)}}"undefined"==typeof YT||void 0===YT.Player?LightboxRender.youtubeManager.loadYoutubeApiScript():window.onYouTubeIframeAPIReady()},initializeCounter:function(){document.querySelectorAll(".widget-counter").forEach(function(e){var t,n,o=e.getAttribute("data-repeat"),i=e.getAttribute("data-version"),a=e.getAttribute("data-date"),r=e.getAttribute("id");if("-1"!==o)n=new Date(a);else{var l=document.cookie?document.cookie.split(";"):[],s={};for(var d in l)if(l.hasOwnProperty(d)&&"string"==typeof d){var c=l[d].split("=");s[c[0].replace(/\s/g,"")]=c[1]}if(s["count-"+r])n=new Date(s["count-"+r]);else{n=new Date;var u=new Date;u.setMonth(u.getMonth()+1),document.cookie="count-"+r+"="+n+";expires="+new Date(u)+";path="+window.location.pathname}n.setMinutes(n.getMinutes()+parseInt(a,10))}i||n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3),t=setInterval(function(){var a,r,l,s,d=new Date,c=n-d;if(c<0)if(!i||parseInt(i,10)<2||!o||o<=0)clearInterval(t),a=0,r=0,l=0,s=0;else for(;c<0;)n.setDate(n.getDate()+parseInt(o,10)),c=n-d;if(c>=0&&(a=Math.floor(c/864e5),r=Math.floor(c%864e5/36e5),l=Math.floor(c%36e5/6e4),s=Math.floor(c%6e4/1e3)),e.querySelectorAll(".widget-text[data-format]").forEach(function(e){var t=e.getAttribute("data-format");t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%dddd",("000"+a).slice(-4))).replace("%ddd",("00"+a).slice(-3))).replace("%dd",("0"+a).slice(-2))).replace("%d",a)).replace("%hh",("0"+r).slice(-2))).replace("%mm",("0"+l).slice(-2))).replace("%ss",("0"+s).slice(-2))).replace("%h",r)).replace("%m",l)).replace("%s",s),e.innerText=t}),0===e.querySelector(".widget-text").length){var u=e.getAttribute("data-format");u=(u=(u=(u=(u=(u=(u=(u=(u=(u=u.replace("%dddd",("000"+a).slice(-4))).replace("%ddd",("00"+a).slice(-3))).replace("%dd",("0"+a).slice(-2))).replace("%d",a)).replace("%hh",("0"+r).slice(-2))).replace("%mm",("0"+l).slice(-2))).replace("%ss",("0"+s).slice(-2))).replace("%h",r)).replace("%m",l)).replace("%s",s),e.innerText(u)}},1e3)})},registerEventHandlers:function(){document.querySelectorAll('[subtype="popup"]').forEach(function(e){const t=e.getAttribute("href").substring(1);let n=document.getElementById(t);n&&LightboxRender.animationManager.enableAnimationCapabilities(n),e.onclick=function(e){e.preventDefault(),n&&LightboxRender.animationManager.show(n);let t=Array.prototype.slice.call(document.querySelectorAll('[class*="-iframe-enabled-"]:not(.iframe-mockup)'));(t=t.filter(function(e){return"none"!==e.style.display&&"hidden"!==e.style.visibility&&e.style.opacity>0})).forEach(function(e,t){new VideoBg(t).resize(),window.innerWidth<768&&t.setAttribute("src","")}),LightboxRender.youtubeManager.handlePlayVideo(),LightboxRender.vimeoManager.handlePlayVideos(n)}}),document.querySelectorAll(".widget-popupcloser").forEach(function(e){e.onclick=function(e){e.preventDefault();const t=this.closest(".landingi-popup");LightboxRender.vimeoManager.handlePauseVideos(t),LightboxRender.youtubeManager.handlePauseVideo(t),LightboxRender.animationManager.hide(t)}});const e=document.getElementsByClassName("landingi-popup");for(let t of e)t.onclick=function(e){e.target===t.getElementsByClassName("landingi-popup-body")[0]&&(LightboxRender.vimeoManager.handlePauseVideos(t),LightboxRender.youtubeManager.handlePauseVideo(t),LightboxRender.animationManager.hide(t))};document.addEventListener("keydown",function(e){if("Escape"===e.key){const e=document.getElementsByClassName("landingi-popup");for(let t of e)LightboxRender.youtubeManager.handlePauseVideo(t),LightboxRender.animationManager.hide(t)}});const t=document.querySelectorAll(".landingi-popup .widget-form");for(let e of t)Common.preventDoubleSubmission(e)},handleLightboxes:function(){LightboxRender.lightboxManager.registerEventHandlers();const e=document.querySelectorAll(".landingi-popup .widget-form");for(let t of e){const e=function(e){e.preventDefault(),t=document.getElementById(t.id);const o=function(e){if(1===e.indexOf("popuplead//")){const t=e.replace("popuplead//","popuplead/"+landingiInternalDetails.landing_hash+"/");let n=window.location.href+t;return-1!==window.location.href.indexOf("?")&&(n=window.location.href.replace(/(.*)\?(.*)/,`$1${t}?$2`)),n}return e},i=function(e){const n=t.getElementsByClassName("widget-input-button");for(let t of n){const n=t.getElementsByClassName("widget-overlay");e(t,n)}};i(function(e,t){for(let n of t)n.style.color=e.style.color,n.innerHTML+='<i class="fa fa-spinner fa-spin"></i>';e.style.color="transparent"});const a=function(e){e.dataset.submitted="0";const t=document.getElementsByClassName("form-error-tooltip");for(let e of t)e.parentNode.removeChild(e);i(function(e,t){for(let e of t)e.removeChild(e.firstChild);e.style.color=""})},r=new FormData(t);r.set("_landing-hash",landingiInternalDetails.landing_hash);const l=new XMLHttpRequest;l.open("POST",function(){let e="https://api.landingi.com/validate";return window.location.href.indexOf(".landingi.it")>0&&(e="https://api.landingi.it/validate"),e}(),!0),l.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){if(200===this.status)window.submitGAformTracking?(window.submitGAformTracking(),setTimeout(function(){t.setAttribute("action",o(t.getAttribute("action"))),t.dataset.submitted="0",document.removeEventListener("submit",n),t.submit()},300)):(t.setAttribute("action",o(t.getAttribute("action"))),t.dataset.submitted="0",document.removeEventListener("submit",n),t.submit());else if(400===this.status){a(t);let e=JSON.parse(l.response).html;validateCallbacks.forEach(function(t){let n=t(e);n&&(e=n)}),document.getElementsByTagName("body").item(0).insertAdjacentHTML("beforeend",e),window.positionValidationTooltips(),window.scrollToFirstTooltip()}else console.error("LightboxRender: Unexpected response occurred");LightboxRender.lightboxManager.registerEventHandlers()}},l.onerror=function(){a(t),LightboxRender.lightboxManager.registerEventHandlers(),console.error("LightboxRender: An error occured while sending form validation XHR")},l.send(r)},n=function(n){const o=t.id;n.target.id===o&&e(n)};document.addEventListener("submit",n)}},injectLightboxes:function(e){const t=new XMLHttpRequest;t.onload=function(){const e=JSON.parse(t.response),n=document.getElementsByTagName("body")[0],o=document.getElementsByTagName("head")[0];if(!n)return;const i=[],a=[];for(let e of document.getElementsByTagName("link"))i.push(e.href);e.forEach(function(e){n.insertAdjacentHTML("beforeend",e.content),n.insertAdjacentHTML("beforeend",'<link href="'+e.style_url+'" rel="stylesheet" type="text/css">'),e.fonts.forEach(function(e){i.includes(e)||a.includes(e)||(a.push(e),o.insertAdjacentHTML("beforeend",'<link href="'+e+'" rel="stylesheet" type="text/css">'))})}),LightboxRender.lightboxManager.hookCustomScripts();const r=new Event("lightboxes-ready");o.dispatchEvent(r),e.length&&(LightboxRender.lightboxManager.initializeCounter(),LightboxRender.lightboxManager.handleLightboxes(),"undefined"==typeof YT||void 0===YT.Player?LightboxRender.youtubeManager.loadYoutubeApiScript():window.onYouTubeIframeAPIReady())},t.open("GET",this.getRenderUrl(landingiInternalDetails.apikey,landingiInternalDetails.landing_id,e)),t.send()},getRenderUrl:function(e,t,n){let o="https://lightboxes.landingi.com/api/v1/render?apikey="+e+"&landing_id="+t;return window.location.href.indexOf(".landingi.it")>0&&(o="https://lightboxes.landingi.it/api/v1/render?apikey="+e+"&landing_id="+t),n&&(o+="&aaf="+window.location.pathname),o}},init:function(e={useAaf:!1}){LightboxRender.cssManager.addCssStyle(lightboxDefaultCss),window.onYouTubeIframeAPIReady=function(){LightboxRender.youtubeManager.initializeYoutubeVideos()},LightboxRender.vimeoManager.initializeVimeoVideos(),LightboxRender.lightboxManager.injectLightboxes(e.useAaf)}};